<%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%>
<%@ page isELIgnored ="true"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>关联性分析</title>
		<s:include value="/innerBase.jsp" />
	</head>

	<body>
		<div class="link_bar">
			当前位置：关联规则挖掘&nbsp;&gt;&nbsp;项目关联性分析
		</div>
		
		<div class="main">
			<div class="main_content">
				<s:form id="form_dm" action="toAnalyze" namespace="/dataMining/association" theme="simple" >
					<table width="100%" border="0" cellspacing="2" cellpadding="2">
						<tr class="table_tr2">
							<td class="table_td2" width="110"><span class="table_title3" style="_padding-top:5px;font-weight:bold;">分析类型：</span></td>
							<td class="table_td3"><s:select cssClass="select" id="type" name="type" headerKey="-1" headerValue="--%{getText('请选择')}--" list="#{'discipline':getText('学科关联性分析'), 'university':getText('高校关联性分析'), 'member':getText('研究人员关联性分析')}"/></td>
							<td class="table_td4"></td>
						</tr>
						
						<tr class="table_tr2">
							<td class="table_td2" width="110"><span class="table_title3" style="_padding-top:5px;font-weight:bold;">分析：</span></td>
							<td class="table_td3">
								<s:radio name="analyzeAngle" value="1" list="#{'0':getText('申报数据'), '1':getText('立项数据'), '2':getText('批准经费')}" />
							</td>
							<td class="table_td4"></td>
						</tr>
						
						<tr class="table_tr2">
							<td class="table_td2" width="110"><span class="table_title3" style="_padding-top:5px;font-weight:bold;">挖掘条数：</span></td>
							<td class="table_td3"><input type="text" name="topKnum" value="10"/></td>
							<td class="table_td4"></td>
						</tr>
						
						<tr class="table_tr2" id="minFrequency">
							<td class="table_td2" width="110"><span class="table_title3" style="_padding-top:5px;font-weight:bold;">最小支持度：</span></td>
							<td class="table_td3"><input type="text" name="minFrequency" /> 注：根据需求，调整该参数，值越小结果越多。</td>
							<td class="table_td4"></td>
						</tr>
						
						<tr class="table_tr2">
							<td class="table_td2" width="110"><span class="table_title3" style="_padding-top:5px;font-weight:bold;">结果入库：</span></td>
							<td class="table_td3"><s:radio name="toDataBase" value="0" list="#{'1':getText('入库'), '0':getText('不入库')}" /></td>
							<td class="table_td4"></td>
						</tr>
					</table>
				
					<div class="btn_bar3">
						<input id="submit" class="btn2" type="submit" value="确定" />
						<input id="reset" class="btn2" type="reset" value="重置" />
					</div>
				</s:form>
			</div>
		</div>
		
		<script type="text/javascript">
			seajs.use('javascript/dataMining/association/validate.js', function(validate) {
				var freqChange = function (num0, num1) {
					if ($("input[name='analyzeAngle']:checked").val() == 0) {
						$("input[name='minFrequency']").val(num0);
					} else if ($("input[name='analyzeAngle']:checked").val() == 1) {
						$("input[name='minFrequency']").val(num1);
					}
				};
				$(function(){
					validate.valid();
					//根据类型设置初始值
					$("#type").change(function(){
						var val = this.value;
						if(val == 'discipline'){
							freqChange(50, 10);
							$("input[name='analyzeAngle'][value='2']").css("display", "none");
							$("input[name='analyzeAngle'][value='2']").next().css("display", "none");
						}else if(val == 'university'){
							freqChange(120, 20);
							$("input[name='analyzeAngle'][value='2']").css("display", "");
							$("input[name='analyzeAngle'][value='2']").next().css("display", "");
						}else if(val == 'member'){
							freqChange(10, 4);
							$("input[name='analyzeAngle'][value='2']").css("display", "none");
							$("input[name='analyzeAngle'][value='2']").next().css("display", "none");
						}
					});
					
					$("input[name='analyzeAngle']").click(function(){
						var val = this.value;
						if(val == 2){
							$("#minFrequency").css("display", "none");
						}else{
							$("#minFrequency").css("display", "");
						}
					});
					
					$("input[name='analyzeAngle']").change(function () {
						if ($("#type").val() == 'university') {
							freqChange(120, 20);
						} else if ($("#type").val() == 'discipline') {
							freqChange(50, 10);
						} else if ($("#type").val() == 'member') {
							freqChange(10, 4);
						}
					});
				});
			});
		</script>
	</body>
</html>